#!/bin/sh

try () {
  if test -x "$1"
  then
    "$*"
    exit 0
  fi
}

if socat -u OPEN:/dev/null UNIX-CONNECT:"$HOME"/.clipper.sock 2>/dev/null
then
  socat - UNIX-CLIENT:"$HOME"/.clipper.sock
  exit 0
fi

try /bin/xclip -in -selection clipboard
try /usr/bin/xclip -in -selection clipboard
try /usr/local/bin/xclip -in -selection clipboard
try /bin/pbcopy
try /usr/bin/pbcopy
try /usr/local/bin/pbcopy

echo "Could not find a 'pbcopy' to use"
exit 1
